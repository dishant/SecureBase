<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;1.&nbsp;Troubleshooting and Debugging HBase</title><link rel="stylesheet" type="text/css" href="../css/freebsd_docbook.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="troubleshooting.html" title="Chapter&nbsp;1.&nbsp;Troubleshooting and Debugging HBase"><link rel="next" href="trouble.log.html" title="1.2.&nbsp;Logs"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;1.&nbsp;Troubleshooting and Debugging HBase</th></tr><tr><td width="20%" align="left">&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="trouble.log.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter&nbsp;1.&nbsp;Troubleshooting and Debugging HBase"><div class="titlepage"><div><div><h2 class="title"><a name="trouble"></a>Chapter&nbsp;1.&nbsp;Troubleshooting and Debugging HBase</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="troubleshooting.html#trouble.general">1.1. General Guidelines</a></span></dt><dt><span class="section"><a href="trouble.log.html">1.2. Logs</a></span></dt><dd><dl><dt><span class="section"><a href="trouble.log.html#trouble.log.locations">1.2.1. Log Locations</a></span></dt><dt><span class="section"><a href="trouble.log.html#trouble.log.levels">1.2.2. Log Levels</a></span></dt><dt><span class="section"><a href="trouble.log.html#trouble.log.gc">1.2.3. JVM Garbage Collection Logs</a></span></dt></dl></dd><dt><span class="section"><a href="trouble.tools.html">1.3. Tools</a></span></dt><dd><dl><dt><span class="section"><a href="trouble.tools.html#trouble.tools.builtin">1.3.1. Builtin Tools</a></span></dt><dt><span class="section"><a href="trouble.tools.html#trouble.tools.external">1.3.2. External Tools</a></span></dt></dl></dd><dt><span class="section"><a href="trouble.client.html">1.4. Client</a></span></dt><dd><dl><dt><span class="section"><a href="trouble.client.html#trouble.client.scantimeout">1.4.1. ScannerTimeoutException or UnknownScannerException</a></span></dt><dt><span class="section"><a href="trouble.client.html#trouble.client.scarylogs">1.4.2. Shell or client application throws lots of scary exceptions during normal operation</a></span></dt><dt><span class="section"><a href="trouble.client.html#trouble.client.longpauseswithcompression">1.4.3. Long Client Pauses With Compression</a></span></dt><dt><span class="section"><a href="trouble.client.html#trouble.client.zookeeper">1.4.4. ZooKeeper Client Connection Errors</a></span></dt></dl></dd><dt><span class="section"><a href="trouble.namenode.html">1.5. NameNode</a></span></dt><dd><dl><dt><span class="section"><a href="trouble.namenode.html#trouble.namenode.disk">1.5.1. HDFS Utilization of Tables and Regions</a></span></dt><dt><span class="section"><a href="trouble.namenode.html#trouble.namenode.hbase.objects">1.5.2. Browsing HDFS for HBase Objects</a></span></dt></dl></dd><dt><span class="section"><a href="trouble.rs.html">1.6. RegionServer</a></span></dt><dd><dl><dt><span class="section"><a href="trouble.rs.html#trouble.rs.startup">1.6.1. Startup Errors</a></span></dt><dt><span class="section"><a href="trouble.rs.html#trouble.rs.runtime">1.6.2. Runtime Errors</a></span></dt><dt><span class="section"><a href="trouble.rs.html#trouble.rs.shutdown">1.6.3. Shutdown Errors</a></span></dt></dl></dd><dt><span class="section"><a href="trouble.master.html">1.7. Master</a></span></dt><dd><dl><dt><span class="section"><a href="trouble.master.html#trouble.master.startup">1.7.1. Startup Errors</a></span></dt><dt><span class="section"><a href="trouble.master.html#trouble.master.shutdown">1.7.2. Shutdown Errors</a></span></dt></dl></dd><dt><span class="section"><a href="trouble.zookeeper.html">1.8. ZooKeeper</a></span></dt><dd><dl><dt><span class="section"><a href="trouble.zookeeper.html#trouble.zookeeper.startup">1.8.1. Startup Errors</a></span></dt><dt><span class="section"><a href="trouble.zookeeper.html#trouble.zookeeper.general">1.8.2. ZooKeeper, The Cluster Canary</a></span></dt></dl></dd><dt><span class="section"><a href="trouble.ec2.html">1.9. Amazon EC2</a></span></dt><dd><dl><dt><span class="section"><a href="trouble.ec2.html#trouble.ec2.zookeeper">1.9.1. ZooKeeper does not seem to work on Amazon EC2</a></span></dt><dt><span class="section"><a href="trouble.ec2.html#trouble.ec2.instability">1.9.2. Instability on Amazon EC2</a></span></dt><dt><span class="section"><a href="trouble.ec2.html#trouble.ec2.connection">1.9.3. Remote Java Connection into EC2 Cluster Not Working</a></span></dt></dl></dd></dl></div><div class="section" title="1.1.&nbsp;General Guidelines"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="trouble.general"></a>1.1.&nbsp;General Guidelines</h2></div></div></div><p>
          Always start with the master log (TODO: Which lines?).
          Normally it&#8217;s just printing the same lines over and over again.
          If not, then there&#8217;s an issue.
          Google or <a class="link" href="http://search-hadoop.com" target="_top">search-hadoop.com</a>
          should return some hits for those exceptions you&#8217;re seeing.
      </p><p>
          An error rarely comes alone in HBase, usually when something gets screwed up what will
          follow may be hundreds of exceptions and stack traces coming from all over the place.
          The best way to approach this type of problem is to walk the log up to where it all
          began, for example one trick with RegionServers is that they will print some
          metrics when aborting so grepping for <span class="emphasis"><em>Dump</em></span>
          should get you around the start of the problem.
      </p><p>
          RegionServer suicides are &#8220;normal&#8221;, as this is what they do when something goes wrong.
          For example, if ulimit and xcievers (the two most important initial settings, see <a class="xref" href="">???</a>)
          aren&#8217;t changed, it will make it impossible at some point for DataNodes to create new threads
          that from the HBase point of view is seen as if HDFS was gone. Think about what would happen if your
          MySQL database was suddenly unable to access files on your local file system, well it&#8217;s the same with
          HBase and HDFS. Another very common reason to see RegionServers committing seppuku is when they enter
          prolonged garbage collection pauses that last longer than the default ZooKeeper session timeout.
          For more information on GC pauses, see the
          <a class="link" href="http://www.cloudera.com/blog/2011/02/avoiding-full-gcs-in-hbase-with-memstore-local-allocation-buffers-part-1/" target="_top">3 part blog post</a>  by Todd Lipcon
          and <a class="xref" href="">???</a> above. 
      </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left">&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="trouble.log.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right" valign="top">&nbsp;1.2.&nbsp;Logs</td></tr></table></div></body></html>