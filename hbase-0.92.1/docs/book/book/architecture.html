<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;8.&nbsp;Architecture</title><link rel="stylesheet" type="text/css" href="../css/freebsd_docbook.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="book.html" title=""><link rel="up" href="book.html" title=""><link rel="prev" href="mapreduce.specex.html" title="7.4.&nbsp;Speculative Execution"><link rel="next" href="client.html" title="8.2.&nbsp;Client"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;8.&nbsp;Architecture</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mapreduce.specex.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="client.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter&nbsp;8.&nbsp;Architecture"><div class="titlepage"><div><div><h2 class="title"><a name="architecture"></a>Chapter&nbsp;8.&nbsp;Architecture</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="architecture.html#arch.catalog">8.1. Catalog Tables</a></span></dt><dd><dl><dt><span class="section"><a href="architecture.html#arch.catalog.root">8.1.1. ROOT</a></span></dt><dt><span class="section"><a href="architecture.html#arch.catalog.meta">8.1.2. META</a></span></dt><dt><span class="section"><a href="architecture.html#arch.catalog.startup">8.1.3. Startup Sequencing</a></span></dt></dl></dd><dt><span class="section"><a href="client.html">8.2. Client</a></span></dt><dd><dl><dt><span class="section"><a href="client.html#client.connections">8.2.1. Connections</a></span></dt><dt><span class="section"><a href="client.html#client.writebuffer">8.2.2. WriteBuffer and Batch Methods</a></span></dt><dt><span class="section"><a href="client.html#client.external">8.2.3. External Clients</a></span></dt></dl></dd><dt><span class="section"><a href="client.filter.html">8.3. Client Filters</a></span></dt><dd><dl><dt><span class="section"><a href="client.filter.html#client.filter.structural">8.3.1. Structural</a></span></dt><dt><span class="section"><a href="client.filter.html#client.filter.cv">8.3.2. Column Value</a></span></dt><dt><span class="section"><a href="client.filter.html#client.filter.cvp">8.3.3. Column Value Comparators</a></span></dt><dt><span class="section"><a href="client.filter.html#client.filter.kvm">8.3.4. KeyValue Metadata</a></span></dt><dt><span class="section"><a href="client.filter.html#client.filter.row">8.3.5. RowKey</a></span></dt><dt><span class="section"><a href="client.filter.html#client.filter.utility">8.3.6. Utility</a></span></dt></dl></dd><dt><span class="section"><a href="master.html">8.4. Master</a></span></dt><dd><dl><dt><span class="section"><a href="master.html#master.startup">8.4.1. Startup Behavior</a></span></dt><dt><span class="section"><a href="master.html#master.api">8.4.2. Interface</a></span></dt><dt><span class="section"><a href="master.html#master.processes">8.4.3. Processes</a></span></dt></dl></dd><dt><span class="section"><a href="regionserver.arch.html">8.5. RegionServer</a></span></dt><dd><dl><dt><span class="section"><a href="regionserver.arch.html#regionserver.arch.api">8.5.1. Interface</a></span></dt><dt><span class="section"><a href="regionserver.arch.html#regionserver.arch.processes">8.5.2. Processes</a></span></dt><dt><span class="section"><a href="regionserver.arch.html#block.cache">8.5.3. Block Cache</a></span></dt><dt><span class="section"><a href="regionserver.arch.html#wal">8.5.4. Write Ahead Log (WAL)</a></span></dt></dl></dd><dt><span class="section"><a href="regions.arch.html">8.6. Regions</a></span></dt><dd><dl><dt><span class="section"><a href="regions.arch.html#arch.regions.size">8.6.1. Region Size</a></span></dt><dt><span class="section"><a href="regions.arch.html#d1223e4174">8.6.2. Region Splits</a></span></dt><dt><span class="section"><a href="regions.arch.html#regions.arch.balancer">8.6.3. Region Load Balancing</a></span></dt><dt><span class="section"><a href="regions.arch.html#store">8.6.4. Store</a></span></dt><dt><span class="section"><a href="regions.arch.html#blooms">8.6.5. Bloom Filters</a></span></dt></dl></dd><dt><span class="section"><a href="arch.hdfs.html">8.7. HDFS</a></span></dt><dd><dl><dt><span class="section"><a href="arch.hdfs.html#arch.hdfs.nn">8.7.1. NameNode</a></span></dt><dt><span class="section"><a href="arch.hdfs.html#arch.hdfs.dn">8.7.2. DataNode</a></span></dt></dl></dd></dl></div><div class="section" title="8.1.&nbsp;Catalog Tables"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="arch.catalog"></a>8.1.&nbsp;Catalog Tables</h2></div></div></div><p>The catalog tables -ROOT- and .META. exist as HBase tables.  They are are filtered out 
	  of the HBase shell's <code class="code">list</code> command, but they are in fact tables just like any other.
     </p><div class="section" title="8.1.1.&nbsp;ROOT"><div class="titlepage"><div><div><h3 class="title"><a name="arch.catalog.root"></a>8.1.1.&nbsp;ROOT</h3></div></div></div><p>-ROOT- keeps track of where the .META. table is.  The -ROOT- table structure is as follows: 
       </p><p>Key:   
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">.META. region key (<code class="code">.META.,,1</code>)</li></ul></div><p>
       </p><p>Values:   
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="code">info:regioninfo</code> (serialized <a class="link" href="http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/HRegionInfo.html" target="_top">HRegionInfo</a>
               instance of .META.)</li><li class="listitem"><code class="code">info:server</code> (server:port of the RegionServer holding .META.)</li><li class="listitem"><code class="code">info:serverstartcode</code> (start-time of the RegionServer process holding .META.)</li></ul></div><p>
       </p></div><div class="section" title="8.1.2.&nbsp;META"><div class="titlepage"><div><div><h3 class="title"><a name="arch.catalog.meta"></a>8.1.2.&nbsp;META</h3></div></div></div><p>The .META. table keeps a list of all regions in the system. The .META. table structure is as follows: 
       </p><p>Key:   
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Region key of the format (<code class="code">[table],[region start key],[region id]</code>)</li></ul></div><p>
       </p><p>Values:   
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="code">info:regioninfo</code> (serialized <a class="link" href="http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/HRegionInfo.html" target="_top">
              HRegionInfo</a> instance for this region)
              </li><li class="listitem"><code class="code">info:server</code> (server:port of the RegionServer containing this region)</li><li class="listitem"><code class="code">info:serverstartcode</code> (start-time of the RegionServer process containing this region)</li></ul></div><p>
       </p><p>When a table is in the process of splitting two other columns will be created, <code class="code">info:splitA</code> and <code class="code">info:splitB</code> 
       which represent the two daughter regions.  The values for these columns are also serialized HRegionInfo instances.
       After the region has been split eventually this row will be deleted.
       </p><p>Notes on HRegionInfo:  the empty key is used to denote table start and table end.  A region with an empty start key
       is the first region in a table.  If region has both an empty start and an empty end key, its the only region in the table
       </p><p>In the (hopefully unlikely) event that programmatic processing of catalog metadata is required, see the
         <a class="link" href="http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/util/Writables.html#getHRegionInfo%28byte[]%29" target="_top">Writables</a> utility.
       </p></div><div class="section" title="8.1.3.&nbsp;Startup Sequencing"><div class="titlepage"><div><div><h3 class="title"><a name="arch.catalog.startup"></a>8.1.3.&nbsp;Startup Sequencing</h3></div></div></div><p>The META location is set in ROOT first.  Then META is updated with server and startcode values.
	    </p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mapreduce.specex.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="client.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">7.4.&nbsp;Speculative Execution&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="book.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;8.2.&nbsp;Client</td></tr></table></div></body></html>